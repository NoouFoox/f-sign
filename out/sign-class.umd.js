(function(i,s){typeof exports=="object"&&typeof module<"u"?module.exports=s():typeof define=="function"&&define.amd?define(s):(i=typeof globalThis<"u"?globalThis:i||self,i.SignClass=s())})(this,function(){"use strict";var o=Object.defineProperty;var c=(i,s,t)=>s in i?o(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var e=(i,s,t)=>(c(i,typeof s!="symbol"?s+"":s,t),t);class i{constructor(t){e(this,"canvas",null);e(this,"ctx",null);e(this,"isDrawing",!1);e(this,"lastX",0);e(this,"lastY",0);e(this,"scale",2);e(this,"isWrite",!1);this.canvas=typeof t=="string"?document.querySelector(t):t,this.scale=Math.max(devicePixelRatio||1,2),this.ctx=this.canvas.getContext("2d"),this.canvas.addEventListener("mousemove",this.__move.bind(this)),this.canvas.addEventListener("mousedown",this.__down.bind(this)),this.canvas.addEventListener("mouseup",this.__up.bind(this)),this.canvas.addEventListener("touchmove",this.__move.bind(this)),this.canvas.addEventListener("touchstart",this.__down.bind(this)),this.canvas.addEventListener("touchend",this.__up.bind(this))}__getXy(t){var a;let n=t.offsetX,h=t.offsetY;return(a=t.touches)!=null&&a.length&&(n=t.touches[0].clientX,h=t.touches[0].clientY),[n,h]}__down(t){t.preventDefault(),this.isWrite=!0;const[n,h]=this.__getXy(t);this.isDrawing=!0,[this.lastX,this.lastY]=[n,h]}__up(){this.isDrawing=!1}__move(t){t.preventDefault();const[n,h]=this.__getXy(t);this.isDrawing&&(this.ctx.beginPath(),this.ctx.moveTo(this.lastX,this.lastY),this.ctx.lineTo(n,h),this.ctx.stroke(),[this.lastX,this.lastY]=[n,h])}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.isWrite=!1}exportImg(){return this.isWrite?this.canvas.toDataURL("image/png"):null}destroyed(){this.canvas.removeListener("mousemove",this.__move.bind(this)),this.canvas.removeListener("mousedown",this.__down.bind(this)),this.canvas.removeListener("mouseup",this.__up.bind(this)),this.canvas.removeListener("touchmove",this.__move.bind(this)),this.canvas.removeListener("touchstart",this.__down.bind(this)),this.canvas.removeListener("touchend",this.__up.bind(this)),this.canvas=null}}return i});
